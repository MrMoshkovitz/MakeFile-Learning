SHELL := /bin/bash
THIS_FILE := $(lastword $(MAKEFILE_LIST))
include .env
# include MakeFile
.DEFAULT_GOAL := help
.PHONY: help

#* ================================================================================================================================================================================================================================================
#?					      $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$	     Gal Moshkovitz Make File	     $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
#* ================================================================================================================================================================================================================================================
#*

#* ================================================================================================================================================================================================================================================
#?											  Make - Make Actions
#* ================================================================================================================================================================================================================================================
print: $(wildcard *.txt)
	echo  $?
# .PHONY: make.list.targets
# make.list.tagets: ## List All Make File Tagets
# 	@$(MAKE) -pRrq -f $(lastword $(MAKEFILE_LIST)) : 2>/dev/null | awk -v RS= -F: '/^# File/,/^# Finished Make data base/ {if ($$1 !~ "^[#.]") {print $$1}}' | sort | egrep -v -e '^[^[:alnum:]]' -e '^$@$$'


#* ================================================================================================================================================================================================================================================
#?											  Make - Combined Multiple Functions
#* ================================================================================================================================================================================================================================================

all: clouds

#* ================================================================================================================================================================================================================================================
#?											  Make - Variables
#* ================================================================================================================================================================================================================================================



#* ================================================================================================================================================================================================================================================
#?											  Make - Multiple Functions
#* ================================================================================================================================================================================================================================================
# clouds: azcli awscli gcloud
clouds: azcli awscli gcloud

# 	$(MAKE) -s awscli -f Install.mk
# endif	
# $(info Action:	Checking if Gcloud CLI Installed.....)
# ifeq ($(shell which gcloud),)
# 	printf "Gcloud CLI Not Found\n"; \
# 	$(MAKE) -s gcloud -f Install.mk
# endif	

azcli: 
	@echo ""
	$(info Target Name:	$@)
	$(info Action:	Checking if Azure CLI Installed.....)
	@echo ""
ifeq ($(shell which az),)
	$(info Azure CLI Not Found); \
	$(MAKE) -s azcli_install -f MakeFiles/Install.mk
else
	$(info Azure CLI is Already Installed)
endif


awscli: 
	@echo ""
	$(info Target Name:	$@)
	$(info Action:	Checking if AWS CLI Installed.....)
	@echo ""
ifeq ($(shell which awscli),)
		$(info AWS CLI Not Found)
		$(info Action:	Installing $@ ............)
		$(MAKE) -s awscli_install -f MakeFiles/Install.mk
else
	$(info AWS CLI is Already Installed)
endif

	

gcloud:
	@echo ""
	$(info Target Name:	$@)
	$(info Action:	Checking if Gcloud CLI Installed.....)
	@echo ""
ifeq ($(shell which gcloud),)
	$(info Gcloud CLI Not Found)
	$(info Action:	Installing $@ ............)
	$(MAKE) -s gcloud_install -f MakeFiles/Install.mk
else
	$(info Gcloud CLI is Already Installed)
endif

awscli_install:
	@echo awscli TEST
azcli_install:
	@echo azcli TEST
gcloud_install:
	@echo GCLOUD TEST